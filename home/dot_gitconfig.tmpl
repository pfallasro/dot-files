[alias]
  # Branch management
  co      = checkout
  cob     = checkout -b
  brm     = "!f() { git branch -d ${1} && git push origin --delete ${1}; }; f"
  su      = "!f() { git branch --set-upstream-to=origin/${1} ${1}; }; f"
  xclean  = "!f() { git branch --merged ${1:-main} | grep -v \" ${1:-main}$\" | xargs git branch -d; }; f"
  done    = "!f() { git checkout ${1:-main} && git up && git xclean ${1:-main}; }; f"

  # Committing
  m     = !git add . && git commit -m
  amn   = commit --amend --no-edit
  save  = !git add -A && git commit -m 'SAVEPOINT'
  undo  = reset HEAD~1 --mixed
  wip   = !git add -u && git commit -m "WIP"

  # Pushing / pulling
  p  = push --set-upstream origin
  pf = push --force-with-lease origin
  up = !git pull --rebase --prune && git submodule update --init --recursive

  # Release workflow
  hotfix    = "!f() { git checkout -b hotfix/${1}; }; f"
  release   = "!f() { git checkout -b release/${1}; }; f"
  tags      = tag -l --sort=-version:refname
  changelog = "!f() { git log ${1}..${2:-HEAD} --oneline --no-merges; }; f"

  # Tags
  tg  = "!f() { git tag -a v${1} -m 'v${1}' && git push origin v${1}; }; f"
  trm = "!f() { git push origin --delete refs/tags/v${1} && git tag -d v${1}; }; f"

  # Inspection
  st           = status --short --branch
  lg           = log --graph --abbrev-commit --decorate --all --format=format:"%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(dim white) - %an%C(reset) %C(bold green)(%ar)%C(reset)%C(bold yellow)%d%C(reset)%n %C(white)%s%C(reset)"
  ln           = log --oneline
  last         = log -1 HEAD --stat
  files        = diff-tree --no-commit-id -r --name-only HEAD
  recent       = branch --sort=-committerdate --format='%(refname:short) %(committerdate:relative)'
  patch        = --no-pager diff --no-color

  # Stash
  ss = stash save
  sp = stash pop
  sl = stash list

  # Staging
  ap = add --patch

  # Misc
  cp  = cherry-pick
  cpa = cherry-pick --abort
  cpc = cherry-pick --continue
  ec  = config --global -e

[color]
  ui = true

[color "diff"]
  meta       = yellow
  frag       = magenta bold
  commit     = yellow bold
  old        = red bold
  new        = green bold
  whitespace = red reverse

[core]
  editor = vim

[rerere]
  enabled = true

[pull]
  rebase = true

[push]
  autoSetupRemote = true

[init]
  defaultBranch = main

[merge]
  conflictstyle = diff3

[user]
  name     = {{ .name }}
  email    = {{ .email }}
  username = pfallasro

[filter "lfs"]
  clean    = git-lfs clean -- %f
  smudge   = git-lfs smudge -- %f
  process  = git-lfs filter-process
  required = true

[url "git@github.com:"]
  insteadOf = https://github.com/
